<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Randal S. Olson">
        <link rel="canonical" href="http://rhiever.github.io/tpot/Using_TPOT/">
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>Using TPOT - TPOT</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="..">TPOT</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="..">Home</a>
                </li>
            
            
            
                <li >
                    <a href="../installing/">Installation</a>
                </li>
            
            
            
                <li class="active">
                    <a href="./">Using TPOT</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Examples <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../examples/MNIST_Example/">MNIST Example</a>
                        </li>
                    
                        <li >
                            <a href="../examples/IRIS_Example/">IRIS Example</a>
                        </li>
                    
                        <li >
                            <a href="../examples/Titanic_Kaggle_Example/">Titanic Kaggle Example</a>
                        </li>
                    
                        <li >
                            <a href="../examples/Custom_Scoring_Functions/">Custom Scoring Functions</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../documentation/">Documentation</a>
                        </li>
                    
                        <li >
                            <a href="../contributing/">Contributing</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                <li >
                    <a rel="next" href="../installing/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../examples/MNIST_Example/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/rhiever/tpot">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#tpot-on-the-command-line">TPOT on the command line</a></li>
        
    
        <li class="main "><a href="#tpot-with-code">TPOT with code</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="tpot-on-the-command-line">TPOT on the command line</h1>
<p>To use TPOT via the command line, enter the following command to see the parameters that TPOT can receive:</p>
<pre><code class="Shell">tpot --help
</code></pre>

<p>The following parameters will display along with their descriptions:</p>
<ul>
<li><code>-i</code> / <code>INPUT_FILE</code>: The path to the data file to optimize the pipeline on. Make sure that the class column in the file is labeled as "class".</li>
<li><code>-is</code> / <code>INPUT_SEPARATOR</code>: The character used to separate columns in the input file. Commas (,) and tabs (\t) are the most common separators.</li>
<li><code>-o</code> / <code>OUTPUT_FILE</code>: The path to a file that you wish to export the pipeline code into. By default, exporting is disabled.</li>
<li><code>-g</code> / <code>GENERATIONS</code>: The number of generations to run pipeline optimization for. Must be &gt; 0. The more generations you give TPOT to run, the longer it takes, but it's also more likely to find better pipelines.</li>
<li><code>-p</code> / <code>POPULATION</code>: The number of pipelines in the genetic algorithm population. Must be &gt; 0. The more pipelines in the population, the slower TPOT will run, but it's also more likely to find better pipelines.</li>
<li><code>-mr</code> / <code>MUTATION_RATE</code>: The mutation rate for the genetic programming algorithm in the range [0.0, 1.0]. This tells the genetic programming algorithm how many pipelines to apply random changes to every generation. We don't recommend that you tweak this parameter unless you know what you're doing.</li>
<li><code>-xr</code> / <code>CROSSOVER_RATE</code>: The crossover rate for the genetic programming algorithm in the range [0.0, 1.0]. This tells the genetic programming algorithm how many pipelines to "breed" every generation. We don't recommend that you tweak this parameter unless you know what you're doing.</li>
<li><code>-s</code> / <code>RANDOM_STATE</code>: The random number generator seed for TPOT. Use this to make sure that TPOT will give you the same results each time you run it against the same data set with that seed.</li>
<li><code>-v</code> / <code>VERBOSITY</code>: How much information TPOT communicates while it's running. 0 = none, 1 = minimal, 2 = all</li>
</ul>
<p>An example command-line call to TPOT may look like:</p>
<pre><code class="Shell">tpot -i data/mnist.csv -is , -o tpot_exported_pipeline.py -g 100 -s 42 -v 2
</code></pre>

<h1 id="tpot-with-code">TPOT with code</h1>
<p>We've taken care to design the TPOT interface to be as similar as possible to scikit-learn.</p>
<p>TPOT can be imported just like any regular Python module. To import TPOT, type:</p>
<pre><code class="Python">from tpot import TPOT
</code></pre>

<p>then create an instance of TPOT as follows:</p>
<pre><code class="Python">from tpot import TPOT

pipeline_optimizer = TPOT()
</code></pre>

<p>Note that you can pass several parameters to the TPOT instantiation call:</p>
<ul>
<li><code>generations</code>: The number of generations to run pipeline optimization for. Must be &gt; 0. The more generations you give TPOT to run, the longer it takes, but it's also more likely to find better pipelines.</li>
<li><code>population_size</code>: The number of pipelines in the genetic algorithm population. Must be &gt; 0. The more pipelines in the population, the slower TPOT will run, but it's also more likely to find better pipelines.</li>
<li><code>mutation_rate</code>: The mutation rate for the genetic programming algorithm in the range [0.0, 1.0]. This tells the genetic programming algorithm how many pipelines to apply random changes to every generation. We don't recommend that you tweak this parameter unless you know what you're doing.</li>
<li><code>crossover_rate</code>: The crossover rate for the genetic programming algorithm in the range [0.0, 1.0]. This tells the genetic programming algorithm how many pipelines to "breed" every generation. We don't recommend that you tweak this parameter unless you know what you're doing.</li>
<li><code>random_state</code>: The random number generator seed for TPOT. Use this to make sure that TPOT will give you the same results each time you run it against the same data set with that seed.</li>
<li><code>verbosity</code>: How much information TPOT communicates while it's running. 0 = none, 1 = minimal, 2 = all</li>
</ul>
<p>Some example code with custom TPOT parameters might look like:</p>
<pre><code class="Python">from tpot import TPOT

pipeline_optimizer = TPOT(generations=100, random_state=42, verbosity=2)
</code></pre>

<p>Now TPOT is ready to work! You can tell TPOT to optimize a pipeline based on a data set with the <code>fit</code> function:</p>
<pre><code class="Python">from tpot import TPOT

pipeline_optimizer = TPOT(generations=100, random_state=42, verbosity=2)
pipeline_optimizer.fit(training_features, training_classes)
</code></pre>

<p>The <code>fit()</code> function takes in a training data set, then further divides it into a training and validation data set (so as to do cross-validation). It then initializes the Genetic Algoritm to find the best pipeline based on the validation set performance evaluated on the basis of a scoring function (generally the classification accuracy, but can be user defined as well like precision/recall/f1, etc).   </p>
<p>You can then proceed to evaluate the final pipeline on the test set with the <code>score()</code> function:</p>
<pre><code class="Python">from tpot import TPOT

pipeline_optimizer = TPOT(generations=100, random_state=42, verbosity=2)
pipeline_optimizer.fit(training_features, training_classes)
print(pipeline_optimizer.score(training_features, training_classes,
                               testing_features, testing_classes))
</code></pre>

<p>Note that you currently need to pass the training data to the <code>score()</code> function so TPOT re-trains the optimized pipeline on the training data.</p>
<p>You also have the option to pass a user-defined scoring function to <code>score()</code>. For more information on this functionality, check <a href="../examples/Custom_Scoring_Functions/">here</a>. </p>
<p>Finally, you can tell TPOT to export the corresponding Python code for the optimized pipeline to a text file with the <code>export()</code> function:</p>
<pre><code class="Python">from tpot import TPOT

pipeline_optimizer = TPOT(generations=100, random_state=42, verbosity=2)
pipeline_optimizer.fit(training_features, training_classes)
print(pipeline_optimizer.score(training_features, training_classes, testing_features, testing_classes))
pipeline_optimizer.export('tpot_exported_pipeline.py')
</code></pre>

<p>Once this code finishes running, <code>tpot_exported_pipeline.py</code> will contain the Python code for the optimized pipeline.</p>
<p>Check our <a href="../examples/MNIST_Example/">examples</a> to see TPOT applied to some specific data sets.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
                <center>Copyright &copy; 2016 <a href="http://www.randalolson.com">Randal Olson</a></center>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script>var base_url = '..';</script>
        <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>